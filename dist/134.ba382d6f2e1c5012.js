"use strict";(self.webpackChunkhumphree=self.webpackChunkhumphree||[]).push([[134],{6671:(w,f,r)=>{r.d(f,{z:()=>ce});var e=r(5e3),u=r(1702),m=r(9634),g=r(629),s=r(9808),v=r(6783);let l=(()=>{class n{constructor(t){this.helper=t,this.filesDropped=new e.vpe}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.fileOver=!0}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.fileOver=!1}onDrop(t){t.preventDefault(),t.stopPropagation();const i=t.dataTransfer.files;let o=["jpeg","jpg","png","pdf","csv","xlsx","xls","docx","doc","pptx","ppt"],a=[];for(let _=0;_<i.length;_++){const h=i[_];let A=h.name.split(".")[h.name.split(".").length-1];o.includes(A)?h.size>5e6?this.helper.toastError("Attachment must be less than 5MB"):a.push(h):this.helper.toastError(`Unsupported file .${A}`)}a.length>0&&this.filesDropped.emit(a),this.fileOver=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.B))},n.\u0275dir=e.lG2({type:n,selectors:[["","appDragnDrop",""]],hostVars:2,hostBindings:function(t,i){1&t&&e.NdJ("dragover",function(a){return i.onDragOver(a)})("dragleave",function(a){return i.onDragLeave(a)})("drop",function(a){return i.onDrop(a)}),2&t&&e.ekj("fileOver",i.fileOver)},outputs:{filesDropped:"filesDropped"}}),n})();function x(n,c){1&n&&(e.TgZ(0,"h4",9),e._uU(1,"Production Schedules"),e.qZA())}function p(n,c){1&n&&(e.TgZ(0,"h4",9),e._uU(1,"Quotations"),e.qZA())}function d(n,c){1&n&&(e.TgZ(0,"h4",9),e._uU(1,"Other Attachments"),e.qZA())}function T(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"i-feather",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),a=o.$implicit,_=o.index;return e.oxw(2).deleteAttachment(a,_)}),e.qZA()}}function Z(n,c){if(1&n&&(e.TgZ(0,"div",12)(1,"div",13)(2,"p",14),e._uU(3),e.qZA(),e.TgZ(4,"div")(5,"a",15),e._uU(6,"View"),e.qZA(),e.YNc(7,T,1,0,"i-feather",16),e.qZA()()()),2&n){const t=c.$implicit,i=e.oxw(2);e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Q6J("href",t.location,e.LSH),e.xp6(2),e.Q6J("ngIf",i._auth.checkPermissions("rod","write"))}}function q(n,c){if(1&n&&(e.TgZ(0,"div",10),e.YNc(1,Z,8,3,"div",11),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.data.attachments)}}function b(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"i-feather",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),a=o.$implicit,_=o.index;return e.oxw(2).deleteAttachment(a,_,"quotation_attachments")}),e.qZA()}}function U(n,c){if(1&n&&(e.TgZ(0,"div",12)(1,"div",13)(2,"p",14),e._uU(3),e.qZA(),e.TgZ(4,"div")(5,"a",15),e._uU(6,"View"),e.qZA(),e.YNc(7,b,1,0,"i-feather",16),e.qZA()()()),2&n){const t=c.$implicit,i=e.oxw(2);e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Q6J("href",t.location,e.LSH),e.xp6(2),e.Q6J("ngIf",i._auth.checkPermissions("rod","write"))}}function k(n,c){if(1&n&&(e.TgZ(0,"div",10),e.YNc(1,U,8,3,"div",11),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.data.quotation_attachments)}}function J(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"i-feather",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),a=o.$implicit,_=o.index;return e.oxw(2).deleteAttachment(a,_,"other_attachments")}),e.qZA()}}function O(n,c){if(1&n&&(e.TgZ(0,"div",12)(1,"div",13)(2,"p",14),e._uU(3),e.qZA(),e.TgZ(4,"div")(5,"a",15),e._uU(6,"View"),e.qZA(),e.YNc(7,J,1,0,"i-feather",16),e.qZA()()()),2&n){const t=c.$implicit,i=e.oxw(2);e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Q6J("href",t.location,e.LSH),e.xp6(2),e.Q6J("ngIf",i._auth.checkPermissions("rod","write"))}}function y(n,c){if(1&n&&(e.TgZ(0,"div",10),e.YNc(1,O,8,3,"div",11),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.data.other_attachments)}}function D(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",18)(2,"label",19),e.NdJ("filesDropped",function(o){return e.CHM(t),e.oxw().dragFiles(o)}),e._UZ(3,"i",20),e.TgZ(4,"span"),e._uU(5,"Drag and drop files here "),e.qZA(),e.TgZ(6,"span"),e._uU(7,"or"),e.qZA(),e.TgZ(8,"span",21),e._uU(9,"Browse files"),e.qZA(),e.TgZ(10,"input",22),e.NdJ("change",function(o){return e.CHM(t),e.oxw().addAttachment(o)}),e.qZA(),e.TgZ(11,"span",23),e._uU(12,"Supported files: jpeg, jpg, png, pdf, csv, xlsx, docx, pptx"),e.qZA()()()()}}function M(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13)(2,"p",14),e._uU(3),e.qZA(),e.TgZ(4,"i-feather",25),e.NdJ("click",function(){const a=e.CHM(t).index;return e.oxw(2).removeAttachment(a)}),e.qZA()()()}if(2&n){const t=c.$implicit;e.xp6(3),e.Oqu(t.name)}}function N(n,c){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,M,5,1,"div",11),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.attachments)}}function S(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"a",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().UploadFiles()}),e._uU(1,"Upload"),e.qZA()}}let C=(()=>{class n{constructor(t,i,o){this._rod=t,this.helper=i,this._auth=o,this.type="add",this.response=new e.vpe,this.formData=new FormData,this.attachments=[]}ngOnInit(){}UploadFiles(){this.formData.set("work_order_id",this.data.id),this.formData.set("type",this.fileType),this._rod.uploadProductionSchedule(this.formData).subscribe(t=>{this.helper.toastSuccess(t.message),this.response.emit({success:!0,data:t.data})})}addAttachment(t){for(let i=0;i<t.target.files.length;i++){const o=t.target.files[i];let a=["jpeg","jpg","png","pdf","csv","xlsx","xls","docx","doc","pptx","ppt"],_=o.name.split(".")[o.name.split(".").length-1];a.includes(_)?o.size>5e6?this.helper.toastError("Attachment must be less than 5MB"):(this.formData.append("attachment[]",o,o.name),null==this.attachments.find(h=>h.name==o.name)&&this.attachments.push(o)):this.helper.toastError(`Unsupported file .${_}`)}}removeAttachment(t){this.formData.delete("attachment[]"),this.attachments.splice(t,1),this.attachments.forEach(i=>{this.formData.append("attachment[]",i,i.name)})}deleteAttachment(t,i,o="attachments"){this._rod.removeProductionSchedule({id:t.id}).subscribe(a=>{this.data[o].splice(i,1),this.helper.toastSuccess(a.message)})}cancel(){this.response.emit({success:!1,data:this.data})}dragFiles(t){for(let i=0;i<t.length;i++){const o=t[i];this.formData.append("attachment[]",o,o.name),null==this.attachments.find(a=>a.name==o.name)&&this.attachments.push(o)}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.W),e.Y36(m.B),e.Y36(g.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-view-production-schedule"]],inputs:{data:"data",type:"type",fileType:"fileType"},outputs:{response:"response"},decls:15,vars:9,consts:[[1,"modal-header"],["class","modal-title",4,"ngIf"],[1,"modal-body"],["class","row",4,"ngIf"],["class","row mb-2",4,"ngIf"],[1,"modal-footer"],[1,"d-flex","align-items-center","justify-content-center","w-100"],["href","javascript:void(0) ",1,"discard-btn",3,"click"],["href","javascript:void(0) ","class","discard-btn ",3,"click",4,"ngIf"],[1,"modal-title"],[1,"row"],["class","col-md-12",4,"ngFor","ngForOf"],[1,"col-md-12"],[1,"d-flex","justify-content-between","border-bottom"],[1,"text-truncate"],["target","_blank",1,"view-anchor","red",3,"href"],["name","trash","class","icon-width ml-3",3,"click",4,"ngIf"],["name","trash",1,"icon-width","ml-3",3,"click"],[1,"col-md-12","d-flex","align-items-center","justify-content-center","w-100"],["for","upload-file","role","button","appDragnDrop","",1,"dragzone",3,"filesDropped"],[1,"fa","fa-upload"],[1,"add-btn"],["type","file","id","upload-file","placeholder","Due Date","multiple","",1,"d-none",3,"change"],[1,"mt-1"],[1,"row","mb-2"],["name","trash",1,"icon-width",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,x,2,0,"h4",1),e.YNc(2,p,2,0,"h4",1),e.YNc(3,d,2,0,"h4",1),e.qZA(),e.TgZ(4,"div",2),e.YNc(5,q,2,1,"div",3),e.YNc(6,k,2,1,"div",3),e.YNc(7,y,2,1,"div",3),e.YNc(8,D,13,0,"div",3),e.YNc(9,N,2,1,"div",4),e.qZA(),e.TgZ(10,"div",5)(11,"div",6)(12,"a",7),e.NdJ("click",function(){return i.cancel()}),e._uU(13,"Close"),e.qZA(),e.YNc(14,S,2,0,"a",8),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngIf",1==i.fileType),e.xp6(1),e.Q6J("ngIf",2==i.fileType),e.xp6(1),e.Q6J("ngIf",3==i.fileType),e.xp6(2),e.Q6J("ngIf","view"==i.type&&1==i.fileType),e.xp6(1),e.Q6J("ngIf","view"==i.type&&2==i.fileType),e.xp6(1),e.Q6J("ngIf","view"==i.type&&3==i.fileType),e.xp6(1),e.Q6J("ngIf","add"==i.type),e.xp6(1),e.Q6J("ngIf","add"==i.type),e.xp6(5),e.Q6J("ngIf","add"==i.type))},directives:[s.O5,s.sg,v.u,l],styles:[".border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;margin-top:10px;padding-bottom:5px}.border-bottom[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .border-bottom[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:0}.icon-width[_ngcontent-%COMP%]{height:18px;width:18px}a.view-anchor.red[_ngcontent-%COMP%]{color:#dc0100!important}.dragzone[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;width:70%;border:1px dashed rgb(128,128,128,.5);padding:25px;font-size:12px;background-color:#fff;border-radius:10px;transition:all .2s}.dragzone[_ngcontent-%COMP%] > .fa[_ngcontent-%COMP%]{font-size:25px}.dragzone[_ngcontent-%COMP%] > .add-btn[_ngcontent-%COMP%]{padding:10px;height:auto;width:auto;min-width:unset;font-size:12px}.dragzone.fileOver[_ngcontent-%COMP%]{border-style:solid;background-color:#80808080}"]}),n})();var I=r(9644);function Q(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"a",18),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).viewDeliveryNotes()}),e._uU(1,"Multiple"),e.qZA()}}function j(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"a",19),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).viewDeliveryNotes()}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.rod.delivery_notes[0]?null:t.rod.delivery_notes[0].ticket_no)}}function E(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"a",20),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).viewProductionSchedule()}),e._uU(1," Multiple "),e.qZA()}}function Y(n,c){if(1&n&&(e.TgZ(0,"a",21),e._uU(1," View "),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("href",t.rod.attachments[0].location,e.LSH)}}function F(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"a",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.deleteAttachment(o.rod.attachments[0])}),e._uU(1,"Delete"),e.qZA()}}function V(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"a",18),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addProductionSchedule()}),e._uU(1," Add "),e.qZA()}}function H(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"a",20),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).viewProductionSchedule(2)}),e._uU(1," Multiple "),e.qZA()}}function z(n,c){if(1&n&&(e.TgZ(0,"a",21),e._uU(1," View "),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("href",t.rod.quotation_attachments[0].location,e.LSH)}}function L(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"a",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.deleteAttachment(o.rod.quotation_attachments[0],"quotation_attachments")}),e._uU(1,"Delete"),e.qZA()}}function B(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"a",18),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addProductionSchedule(2)}),e._uU(1," Add "),e.qZA()}}function K(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"a",20),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).viewProductionSchedule(3)}),e._uU(1," Multiple "),e.qZA()}}function $(n,c){if(1&n&&(e.TgZ(0,"a",21),e._uU(1," View "),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("href",t.rod.other_attachments[0].location,e.LSH)}}function W(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"a",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.deleteAttachment(o.rod.other_attachments[0],"other_attachments")}),e._uU(1,"Delete"),e.qZA()}}function R(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"a",18),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addProductionSchedule(3)}),e._uU(1," Add "),e.qZA()}}const P=function(n){return{invisible:n}};function X(n,c){if(1&n&&(e.TgZ(0,"li",23)(1,"div",24),e._uU(2),e.qZA(),e.TgZ(3,"div",25)(4,"ul",26)(5,"li",27),e._uU(6,"Employee Name"),e.qZA(),e.TgZ(7,"li",28),e._uU(8),e.qZA()(),e.TgZ(9,"ul",26)(10,"li",27),e._uU(11,"Status"),e.qZA(),e.TgZ(12,"li",28),e._uU(13),e.qZA()(),e.TgZ(14,"ul",29)(15,"li",27),e._uU(16,"Job Note"),e.qZA(),e.TgZ(17,"li",28),e._UZ(18,"div",30),e.qZA()()(),e.TgZ(19,"p",31),e._uU(20),e.ALo(21,"date"),e.qZA()()),2&n){const t=e.oxw(),i=t.index,o=t.$implicit;e.xp6(2),e.Oqu(i+1),e.xp6(6),e.Oqu(o.user.name),e.xp6(5),e.Oqu(o.title),e.xp6(1),e.Q6J("ngClass",e.VKq(9,P,!o.description)),e.xp6(4),e.Q6J("innerHtml",o.description,e.oJD),e.xp6(2),e.Oqu(e.xi3(21,6,o.created_at,"hh:mm a | dd MMMM, yyyy"))}}function G(n,c){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,X,22,11,"li",22),e.qZA()),2&n){const t=c.index;e.xp6(1),e.Q6J("ngIf",t%2==0)}}function ee(n,c){if(1&n&&(e.TgZ(0,"li",23)(1,"div",24),e._uU(2),e.qZA(),e.TgZ(3,"div",25)(4,"ul",26)(5,"li",27),e._uU(6,"Employee Name"),e.qZA(),e.TgZ(7,"li",28),e._uU(8),e.qZA()(),e.TgZ(9,"ul",26)(10,"li",27),e._uU(11,"Status"),e.qZA(),e.TgZ(12,"li",28),e._uU(13),e.qZA()(),e.TgZ(14,"ul",29)(15,"li",27),e._uU(16,"Job Note"),e.qZA(),e.TgZ(17,"li",28),e._UZ(18,"div",30),e.qZA()()(),e.TgZ(19,"p",31),e._uU(20),e.ALo(21,"date"),e.qZA()()),2&n){const t=e.oxw(),i=t.index,o=t.$implicit;e.xp6(2),e.Oqu(i+1),e.xp6(6),e.Oqu(o.user.name),e.xp6(5),e.Oqu(o.title),e.xp6(1),e.Q6J("ngClass",e.VKq(9,P,!o.description)),e.xp6(4),e.Q6J("innerHtml",o.description,e.oJD),e.xp6(2),e.Oqu(e.xi3(21,6,o.created_at,"hh:mm a | dd MMMM, yyyy"))}}function te(n,c){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,ee,22,11,"li",22),e.qZA()),2&n){const t=c.index;e.xp6(1),e.Q6J("ngIf",t%2!=0)}}function ne(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div",32)(1,"span",33),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).showJobNoteDetails(null)}),e._uU(2,"X"),e.qZA(),e.TgZ(3,"h4",34),e._uU(4,"Job Note "),e._UZ(5,"i",35),e.qZA(),e.TgZ(6,"div",36),e._UZ(7,"div",30),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(7),e.Q6J("innerHtml",t.jobDetail.description,e.oJD)}}const ie=function(n){return{"show-job-note":n}};function oe(n,c){if(1&n&&(e.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"table",7)(4,"thead")(5,"tr")(6,"th"),e._uU(7,"Work#"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Customer"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Order#"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Product"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Progress"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Delivery Note"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Production Schedule"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Quotations"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Other Attachments"),e.qZA()()(),e.TgZ(24,"tbody")(25,"tr")(26,"td"),e._uU(27),e.qZA(),e.TgZ(28,"td"),e._uU(29),e.qZA(),e.TgZ(30,"td"),e._uU(31),e.qZA(),e.TgZ(32,"td"),e._uU(33),e.qZA(),e.TgZ(34,"td"),e._uU(35),e.qZA(),e.TgZ(36,"td"),e.YNc(37,Q,2,0,"a",8),e.YNc(38,j,2,1,"a",9),e.qZA(),e.TgZ(39,"td"),e.YNc(40,E,2,0,"a",10),e.YNc(41,Y,2,1,"a",11),e.YNc(42,F,2,0,"a",10),e.YNc(43,V,2,0,"a",8),e.qZA(),e.TgZ(44,"td"),e.YNc(45,H,2,0,"a",10),e.YNc(46,z,2,1,"a",11),e.YNc(47,L,2,0,"a",10),e.YNc(48,B,2,0,"a",8),e.qZA(),e.TgZ(49,"td"),e.YNc(50,K,2,0,"a",10),e.YNc(51,$,2,1,"a",11),e.YNc(52,W,2,0,"a",10),e.YNc(53,R,2,0,"a",8),e.qZA()()()()()(),e.TgZ(54,"div",12)(55,"div",13)(56,"ul",14),e.YNc(57,G,2,1,"div",15),e.qZA(),e.TgZ(58,"div",16)(59,"ul",14),e.YNc(60,te,2,1,"div",15),e.qZA()()(),e.YNc(61,ne,8,1,"div",17),e.qZA()()),2&n){const t=e.oxw();e.xp6(27),e.Oqu(t.rod.work_number),e.xp6(2),e.Oqu(t.rod.customer.name),e.xp6(2),e.Oqu(t.rod.order_number),e.xp6(2),e.Oqu(t.rod.product.name),e.xp6(2),e.Oqu(t.rod.progress),e.xp6(2),e.Q6J("ngIf",t.rod.delivery_notes_count>1),e.xp6(1),e.Q6J("ngIf",1==t.rod.delivery_notes_count),e.xp6(2),e.Q6J("ngIf",t.rod.attachments.length>1),e.xp6(1),e.Q6J("ngIf",1==t.rod.attachments.length),e.xp6(1),e.Q6J("ngIf",1==t.rod.attachments.length&&(t._auth.checkPermissions("rod","write")||t._auth.checkPermissions("delivery_list","write"))),e.xp6(1),e.Q6J("ngIf",t._auth.checkPermissions("rod","write")||t._auth.checkPermissions("delivery_list","write")),e.xp6(2),e.Q6J("ngIf",t.rod.quotation_attachments.length>1),e.xp6(1),e.Q6J("ngIf",1==t.rod.quotation_attachments.length),e.xp6(1),e.Q6J("ngIf",1==t.rod.quotation_attachments.length&&(t._auth.checkPermissions("rod","write")||t._auth.checkPermissions("delivery_list","write"))),e.xp6(1),e.Q6J("ngIf",t._auth.checkPermissions("rod","write")||t._auth.checkPermissions("delivery_list","write")),e.xp6(2),e.Q6J("ngIf",t.rod.other_attachments.length>1),e.xp6(1),e.Q6J("ngIf",1==t.rod.other_attachments.length),e.xp6(1),e.Q6J("ngIf",1==t.rod.other_attachments.length&&(t._auth.checkPermissions("rod","write")||t._auth.checkPermissions("delivery_list","write"))),e.xp6(1),e.Q6J("ngIf",t._auth.checkPermissions("rod","write")||t._auth.checkPermissions("delivery_list","write")),e.xp6(2),e.Q6J("ngClass",e.VKq(23,ie,null!=t.jobDetail)),e.xp6(2),e.Q6J("ngForOf",t.jobNotes),e.xp6(3),e.Q6J("ngForOf",t.jobNotes),e.xp6(1),e.Q6J("ngIf",t.jobDetail)}}let ce=(()=>{class n{constructor(t,i,o,a){this._rod=t,this._modal=i,this._auth=o,this.helper=a,this.response=new e.vpe,this.jobNotes=[],this.jobDetail=null,this.showPage=!1,this.modalConfig={animated:!0,keyboard:!1,backdrop:!1,ignoreBackdropClick:!0,windowClass:"modal-roles"}}ngOnInit(){console.log("timeline rod",this.rod),this.getTimeLine(),this.getNotifications()}getTimeLine(){this._rod.getTimeline({work_order_id:this.rod.id,timeline:!0}).subscribe(t=>{console.log(t.data),this.getOrder(),this.jobNotes=t.data})}getOrder(){this._rod.getWorkOrder({id:this.rod.id}).subscribe(t=>{this.rod=t.data,this.showPage=!0})}getNotifications(){this.notificationSubscription=this.helper.currentNotification.subscribe(t=>{t&&"timeline"==t.component&&t.body&&JSON.parse(t.body).id==this.rod.id&&this.getTimeLine()})}close(){this.response.emit({success:!1,data:this.rod})}viewDeliveryNotes(){this.response.emit({success:!0})}viewProductionSchedule(t=1){const i=this._modal.open(C,this.modalConfig);i.componentInstance.data=this.rod,i.componentInstance.fileType=t,i.componentInstance.type="view",i.componentInstance.response.subscribe(o=>{o.success&&(this.rod=o.data),i.dismiss()})}addProductionSchedule(t=1){const i=this._modal.open(C,this.modalConfig);i.componentInstance.data=this.rod,i.componentInstance.fileType=t,i.componentInstance.type="add",i.componentInstance.response.subscribe(o=>{o.success&&(this.rod=o.data),i.dismiss()})}deleteAttachment(t,i="attachments"){this._rod.removeProductionSchedule({id:t.id}).subscribe(o=>{this.rod[i]=[],this.helper.toastSuccess(o.message)})}showJobNoteDetails(t){this.jobDetail=t}ngOnDestroy(){this.notificationSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.W),e.Y36(I.FF),e.Y36(g.e),e.Y36(m.B))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-timeline"]],inputs:{rod:"rod"},outputs:{response:"response"},decls:5,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],[1,"fa","fa-times","cursor-pointer",2,"font-size","20px","margin-top","5px",3,"click"],["class","modal-body ",4,"ngIf"],[1,"modal-body"],[1,"timeline-table"],[1,"modal-table","table-responsive"],[1,"table"],["class","view-anchor view-anchor-red",3,"click",4,"ngIf"],["class","view-anchor view-anchor-red","href","javascript:void(0)",3,"click",4,"ngIf"],["class","view-anchor view-anchor-red mr-2","href","javascript:void(0)",3,"click",4,"ngIf"],["class","view-anchor view-anchor-red mr-2","target","_blank",3,"href",4,"ngIf"],[1,"timeline-section","d-flex","justify-content-between"],[1,"timeline-card-main",3,"ngClass"],[1,"cars-time-list"],[4,"ngFor","ngForOf"],[1,"bottom-card-list"],["class","job-details-section",4,"ngIf"],[1,"view-anchor","view-anchor-red",3,"click"],["href","javascript:void(0)",1,"view-anchor","view-anchor-red",3,"click"],["href","javascript:void(0)",1,"view-anchor","view-anchor-red","mr-2",3,"click"],["target","_blank",1,"view-anchor","view-anchor-red","mr-2",3,"href"],["class","card-timeline position-relative",4,"ngIf"],[1,"card-timeline","position-relative"],[1,"timeline-counter"],[1,"timeline-counter-scroll"],[1,"card-ul-timeline"],[1,"timeline-name-heading"],[1,"timeline-name"],[1,"card-ul-timeline",3,"ngClass"],[3,"innerHtml"],[1,"date-center"],[1,"job-details-section"],[1,"close-job-details",3,"click"],[1,"title"],[1,"bi","bi-arrow-right"],[1,"job-note-description"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"TIMELINE"),e.qZA(),e.TgZ(3,"i",2),e.NdJ("click",function(){return i.close()}),e.qZA()(),e.YNc(4,oe,62,25,"div",3)),2&t&&(e.xp6(4),e.Q6J("ngIf",i.showPage))},directives:[s.O5,s.mk,s.sg],pipes:[s.uU],styles:[".timeline-card-main.show-job-note[_ngcontent-%COMP%]{max-width:75%}.job-details-section[_ngcontent-%COMP%]{width:25%;min-width:25%;position:relative;padding-left:10px;border-left:.5px solid #ccc}.job-details-section[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;color:#dc0100;text-transform:uppercase}.close-job-details[_ngcontent-%COMP%]{color:inherit;cursor:pointer;position:absolute;right:15px;top:1px;font-size:13px;font-weight:bolder}.job-note-description[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;font-size:12px}.job-note-description[_ngcontent-%COMP%]   .timeline-job-note-details[_ngcontent-%COMP%]{font-weight:700}.timeline-counter[_ngcontent-%COMP%]{position:absolute;background:#DC0100;height:20px;width:20px;display:flex;justify-content:center;align-items:center;border-radius:50%;right:1rem;font-size:10px;font-weight:bolder;color:#fff}"]}),n})()},8601:(w,f,r)=>{r.d(f,{Q:()=>v});var e=r(5e3),u=r(4182),m=r(9808);function g(l,x){if(1&l&&(e.TgZ(0,"div",21)(1,"h4"),e._uU(2),e.qZA()()),2&l){const p=e.oxw();e.xp6(2),e.lnq("Showing ",p.from," - ",p.to," of ",p.total,"")}}const s=function(l){return{disabled:l}};let v=(()=>{class l{constructor(){this.totalPages=1,this.currentPage=1,this.pageSize=10,this.from=1,this.to=10,this.total=10,this.changePage=new e.vpe,this.ChangePageSize=new e.vpe}ngOnInit(){}nextPage(){this.currentPage!=this.totalPages&&(this.currentPage++,this.changePage.emit(this.currentPage))}prevPage(){1!=this.currentPage&&(this.currentPage--,this.changePage.emit(this.currentPage))}pageSizeUpdate(p){this.pageSize=p.target.value,this.ChangePageSize.emit(this.pageSize)}}return l.\u0275fac=function(p){return new(p||l)},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-pagination"]],inputs:{totalPages:"totalPages",currentPage:"currentPage",pageSize:"pageSize",from:"from",to:"to",total:"total"},outputs:{changePage:"changePage",ChangePageSize:"ChangePageSize"},decls:31,vars:10,consts:[[1,"d-flex","align-items-center","justify-content-end","mr-2","mt-2","pagination"],[1,"d-flex","rows-per"],[1,"row-heading"],[1,"select-box"],[1,"arrow-design"],[1,"form-control","bulk-select-status",3,"ngModel","ngModelChange","change"],["value","5"],["value","10"],["value","20"],["value","50"],["value","100"],[3,"value"],["class","d-flex align-items-center mr-3 justify-content-center",4,"ngIf"],[1,"pagination-ctm","d-inline-block"],[1,"item"],["href","javascript:void(0)",1,"page-arow-l",3,"ngClass","click"],["aria-hidden","true",1,"fa","fa-angle-left"],[1,"my-pagination","d-inline-block"],["href","javascript:void(0)",1,"link"],["href","javascript:void(0)","role","button",1,"page-arow-l",3,"ngClass","click"],["aria-hidden","true",1,"fa","fa-angle-right"],[1,"d-flex","align-items-center","mr-3","justify-content-center"]],template:function(p,d){1&p&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3,"Rows per page:"),e.qZA(),e.TgZ(4,"div",3)(5,"div",4)(6,"select",5),e.NdJ("ngModelChange",function(Z){return d.pageSize=Z})("change",function(Z){return d.pageSizeUpdate(Z)}),e.TgZ(7,"option",6),e._uU(8,"5"),e.qZA(),e.TgZ(9,"option",7),e._uU(10,"10"),e.qZA(),e.TgZ(11,"option",8),e._uU(12,"20"),e.qZA(),e.TgZ(13,"option",9),e._uU(14,"50"),e.qZA(),e.TgZ(15,"option",10),e._uU(16,"100"),e.qZA(),e.TgZ(17,"option",11),e._uU(18,"All"),e.qZA()()()()(),e.YNc(19,g,3,3,"div",12),e.TgZ(20,"div",13)(21,"li",14)(22,"a",15),e.NdJ("click",function(){return d.prevPage()}),e._UZ(23,"i",16),e.qZA()(),e.TgZ(24,"ul",17)(25,"li",14)(26,"a",18),e._uU(27),e.qZA()()(),e.TgZ(28,"li",14)(29,"a",19),e.NdJ("click",function(){return d.nextPage()}),e._UZ(30,"i",20),e.qZA()()()()),2&p&&(e.xp6(6),e.Q6J("ngModel",d.pageSize),e.xp6(11),e.s9C("value",d.total),e.xp6(2),e.Q6J("ngIf",d.from),e.xp6(3),e.Q6J("ngClass",e.VKq(6,s,1==d.currentPage)),e.xp6(5),e.Oqu(d.currentPage),e.xp6(2),e.Q6J("ngClass",e.VKq(8,s,d.currentPage==d.totalPages)))},directives:[u.EJ,u.JJ,u.On,u.YN,u.Kr,m.O5,m.mk],styles:[".pagination[_ngcontent-%COMP%]   .select-box[_ngcontent-%COMP%]   .arrow-design[_ngcontent-%COMP%]{width:auto}.pagination[_ngcontent-%COMP%]   .row-heading[_ngcontent-%COMP%]{white-space:nowrap}.disabled[_ngcontent-%COMP%]:hover{opacity:.7;cursor:not-allowed;background:#14274E1A;color:#656565}"]}),l})()},9618:(w,f,r)=>{r.d(f,{m:()=>g});var e=r(9808),u=r(4182),m=r(5e3);let g=(()=>{class s{}return s.\u0275fac=function(l){return new(l||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({imports:[[e.ez,u.u5]]}),s})()}}]);
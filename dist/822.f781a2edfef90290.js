"use strict";(self.webpackChunkhumphree=self.webpackChunkhumphree||[]).push([[822],{8601:(U,v,c)=>{c.d(v,{Q:()=>l});var s=c(5e3),_=c(4182),e=c(9808);function f(u,d){if(1&u&&(s.TgZ(0,"div",21)(1,"h4"),s._uU(2),s.qZA()()),2&u){const h=s.oxw();s.xp6(2),s.lnq("Showing ",h.from," - ",h.to," of ",h.total,"")}}const g=function(u){return{disabled:u}};let l=(()=>{class u{constructor(){this.totalPages=1,this.currentPage=1,this.pageSize=10,this.from=1,this.to=10,this.total=10,this.changePage=new s.vpe,this.ChangePageSize=new s.vpe}ngOnInit(){}nextPage(){this.currentPage!=this.totalPages&&(this.currentPage++,this.changePage.emit(this.currentPage))}prevPage(){1!=this.currentPage&&(this.currentPage--,this.changePage.emit(this.currentPage))}pageSizeUpdate(h){this.pageSize=h.target.value,this.ChangePageSize.emit(this.pageSize)}}return u.\u0275fac=function(h){return new(h||u)},u.\u0275cmp=s.Xpm({type:u,selectors:[["app-pagination"]],inputs:{totalPages:"totalPages",currentPage:"currentPage",pageSize:"pageSize",from:"from",to:"to",total:"total"},outputs:{changePage:"changePage",ChangePageSize:"ChangePageSize"},decls:31,vars:10,consts:[[1,"d-flex","align-items-center","justify-content-end","mr-2","mt-2","pagination"],[1,"d-flex","rows-per"],[1,"row-heading"],[1,"select-box"],[1,"arrow-design"],[1,"form-control","bulk-select-status",3,"ngModel","ngModelChange","change"],["value","5"],["value","10"],["value","20"],["value","50"],["value","100"],[3,"value"],["class","d-flex align-items-center mr-3 justify-content-center",4,"ngIf"],[1,"pagination-ctm","d-inline-block"],[1,"item"],["href","javascript:void(0)",1,"page-arow-l",3,"ngClass","click"],["aria-hidden","true",1,"fa","fa-angle-left"],[1,"my-pagination","d-inline-block"],["href","javascript:void(0)",1,"link"],["href","javascript:void(0)","role","button",1,"page-arow-l",3,"ngClass","click"],["aria-hidden","true",1,"fa","fa-angle-right"],[1,"d-flex","align-items-center","mr-3","justify-content-center"]],template:function(h,m){1&h&&(s.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),s._uU(3,"Rows per page:"),s.qZA(),s.TgZ(4,"div",3)(5,"div",4)(6,"select",5),s.NdJ("ngModelChange",function(Z){return m.pageSize=Z})("change",function(Z){return m.pageSizeUpdate(Z)}),s.TgZ(7,"option",6),s._uU(8,"5"),s.qZA(),s.TgZ(9,"option",7),s._uU(10,"10"),s.qZA(),s.TgZ(11,"option",8),s._uU(12,"20"),s.qZA(),s.TgZ(13,"option",9),s._uU(14,"50"),s.qZA(),s.TgZ(15,"option",10),s._uU(16,"100"),s.qZA(),s.TgZ(17,"option",11),s._uU(18,"All"),s.qZA()()()()(),s.YNc(19,f,3,3,"div",12),s.TgZ(20,"div",13)(21,"li",14)(22,"a",15),s.NdJ("click",function(){return m.prevPage()}),s._UZ(23,"i",16),s.qZA()(),s.TgZ(24,"ul",17)(25,"li",14)(26,"a",18),s._uU(27),s.qZA()()(),s.TgZ(28,"li",14)(29,"a",19),s.NdJ("click",function(){return m.nextPage()}),s._UZ(30,"i",20),s.qZA()()()()),2&h&&(s.xp6(6),s.Q6J("ngModel",m.pageSize),s.xp6(11),s.s9C("value",m.total),s.xp6(2),s.Q6J("ngIf",m.from),s.xp6(3),s.Q6J("ngClass",s.VKq(6,g,1==m.currentPage)),s.xp6(5),s.Oqu(m.currentPage),s.xp6(2),s.Q6J("ngClass",s.VKq(8,g,m.currentPage==m.totalPages)))},directives:[_.EJ,_.JJ,_.On,_.YN,_.Kr,e.O5,e.mk],styles:[".pagination[_ngcontent-%COMP%]   .select-box[_ngcontent-%COMP%]   .arrow-design[_ngcontent-%COMP%]{width:auto}.pagination[_ngcontent-%COMP%]   .row-heading[_ngcontent-%COMP%]{white-space:nowrap}.disabled[_ngcontent-%COMP%]:hover{opacity:.7;cursor:not-allowed;background:#14274E1A;color:#656565}"]}),u})()},3822:(U,v,c)=>{c.r(v),c.d(v,{AdministrationModule:()=>_e});var s=c(9808),_=c(7587),e=c(5e3),f=c(9634),g=c(1628),l=c(4182);function u(n,r){1&n&&(e.TgZ(0,"h4",8),e._uU(1,"ADD ROLE"),e.qZA())}function d(n,r){1&n&&(e.TgZ(0,"h4",8),e._uU(1,"EDIT ROLE"),e.qZA())}function h(n,r){1&n&&(e.TgZ(0,"h4",8),e._uU(1,"DELETE ROLE"),e.qZA())}function m(n,r){if(1&n&&(e.TgZ(0,"p",23),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.xp6(1),e.Oqu(t.title)}}function C(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",24)(1,"label",25)(2,"input",26),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.action[1]=o}),e.qZA(),e._UZ(3,"span",27),e.qZA()()}if(2&n){const t=r.$implicit;e.xp6(2),e.Q6J("checked",t.action[1])("ngModel",t.action[1])}}function Z(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",24)(1,"label",25)(2,"input",26),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.action[2]=o}),e.qZA(),e._UZ(3,"span",27),e.qZA()()}if(2&n){const t=r.$implicit;e.xp6(2),e.Q6J("checked",t.action[2])("ngModel",t.action[2])}}function y(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"label",11),e._uU(3,"Name"),e.TgZ(4,"span",12),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"input",13),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().role.title=o}),e.qZA()(),e.TgZ(7,"div",14)(8,"div",15)(9,"p",16),e._uU(10,"Premissions"),e.qZA(),e.YNc(11,m,2,1,"p",17),e.qZA(),e.TgZ(12,"div",18)(13,"div",19)(14,"p",20),e._uU(15,"Read"),e.qZA(),e.YNc(16,C,4,2,"div",21),e.qZA(),e.TgZ(17,"div",22)(18,"p",16),e._uU(19,"Write"),e.qZA(),e.YNc(20,Z,4,2,"div",21),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.role.title),e.xp6(5),e.Q6J("ngForOf",t.role.permissions),e.xp6(5),e.Q6J("ngForOf",t.role.permissions),e.xp6(4),e.Q6J("ngForOf",t.role.permissions)}}function k(n,r){1&n&&(e.TgZ(0,"div",9)(1,"h3",28),e._uU(2,"Are you sure you want to delete this role?"),e.qZA()())}function J(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"a",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().add()}),e._uU(1,"Add"),e.qZA()}}function q(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"a",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().update()}),e._uU(1,"Update"),e.qZA()}}function N(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"a",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().deleteRole()}),e._uU(1,"Confirm"),e.qZA()}}let M=(()=>{class n{constructor(t,i){this.helper=t,this._administration=i,this.response=new e.vpe}ngOnInit(){var t;console.log("Role",this.role.permissions),localStorage.getItem("permissionsList")?(null===(t=this.role)||void 0===t?void 0:t.permissions)||(this.role.permissions=JSON.parse(localStorage.getItem("permissionsList"))):this._administration.getPermissionsList().subscribe(i=>{this.role.permissions=i.data,localStorage.setItem("permissionsList",JSON.stringify(i.data))})}cancel(){this.response.emit({success:!1})}add(){this.validateForm()&&this._administration.addRole(this.role).subscribe(t=>{this.helper.toastSuccess(t.message),this.response.emit(t)})}deleteRole(){this._administration.deleteRole({id:this.role.id}).subscribe(t=>{this.helper.toastSuccess(t.message),this.response.emit({success:!0,delete:!0})})}update(){this.validateForm()&&this._administration.updateRole(this.role).subscribe(t=>{this.helper.toastSuccess(t.message),this.response.emit(t)})}validateForm(){var t;return!!(null===(t=this.role.title)||void 0===t?void 0:t.length)||(this.helper.toastError("Role name is required"),!1)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.B),e.Y36(g.E))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-edit-roles"]],inputs:{role:"role",type:"type"},outputs:{response:"response"},decls:15,vars:8,consts:[[1,"modal-header"],["class","modal-title",4,"ngIf"],["type","button","data-dismiss","modal",1,"close"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"d-flex","align-items-center","justify-content-center","w-100"],["href","javascript:void(0)",1,"discard-btn",3,"click"],["href","javascript:void(0)","class","add-btn",3,"click",4,"ngIf"],[1,"modal-title"],[1,"modal-body"],[1,"input-style"],[1,"d-block"],[1,"text-danger"],["type","text","placeholder","Accounts","name","title",1,"ctm-input",3,"ngModel","ngModelChange"],[1,"add-role-new-design"],[1,"permission-feature-column"],[1,"permission"],["class","status-f",4,"ngFor","ngForOf"],[1,"d-flex"],[1,"read-checkbox"],[1,"permission","permission-right"],["class","remember-me",4,"ngFor","ngForOf"],[1,"write-checkbox"],[1,"status-f"],[1,"remember-me"],[1,"custom-check","custom-check-r"],["type","checkbox",3,"checked","ngModel","ngModelChange"],[1,"checkmark"],[1,"text-center"],["href","javascript:void(0)",1,"add-btn",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,u,2,0,"h4",1),e.YNc(2,d,2,0,"h4",1),e.YNc(3,h,2,0,"h4",1),e.TgZ(4,"button",2),e._uU(5,"\xd7"),e.qZA()(),e.YNc(6,y,21,4,"div",3),e.YNc(7,k,3,0,"div",3),e.TgZ(8,"div",4)(9,"div",5)(10,"a",6),e.NdJ("click",function(){return i.cancel()}),e._uU(11,"Cancel"),e.qZA(),e.YNc(12,J,2,0,"a",7),e.YNc(13,q,2,0,"a",7),e.YNc(14,N,2,0,"a",7),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngIf","add"==i.type),e.xp6(1),e.Q6J("ngIf","edit"==i.type),e.xp6(1),e.Q6J("ngIf","delete"==i.type),e.xp6(3),e.Q6J("ngIf","delete"!=i.type),e.xp6(1),e.Q6J("ngIf","delete"==i.type),e.xp6(5),e.Q6J("ngIf","add"==i.type),e.xp6(1),e.Q6J("ngIf","edit"==i.type),e.xp6(1),e.Q6J("ngIf","delete"==i.type))},directives:[s.O5,l.Fj,l.JJ,l.On,s.sg,l.Wl],styles:[""]}),n})();var b=c(9644),A=c(629),x=c(6783);function S(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"a",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().addRole()}),e._UZ(1,"i-feather",18),e._uU(2," New Role "),e.qZA()}}function P(n,r){1&n&&(e.TgZ(0,"th"),e._uU(1,"Action"),e.qZA())}function R(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"td")(1,"div",19)(2,"div",20)(3,"i-feather",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),a=o.$implicit,p=o.index;return e.oxw().roleAction(a,"edit",p)}),e.qZA(),e.TgZ(4,"i-feather",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),a=o.$implicit,p=o.index;return e.oxw().roleAction(a,"delete",p)}),e.qZA()()()()}}function w(n,r){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.YNc(5,R,5,0,"td",14),e.qZA()),2&n){const t=r.$implicit,i=e.oxw();e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("ngIf",i._auth.checkPermissions("administration","write"))}}let I=(()=>{class n{constructor(t,i,o,a,p){this.ref=t,this._administration=i,this._modal=o,this._auth=a,this.helper=p,this.roles=[],this.search="",this.modalConfig={animated:!0,keyboard:!1,backdrop:!1,ignoreBackdropClick:!0,windowClass:"modal-roles"}}ngOnInit(){this.getRoles(),this.getNotifications()}getNotifications(){this.notificationSubscription=this.helper.currentNotification.subscribe(t=>{1==this.helper.checkNotification("roles","administration",this.roles,t)?this.getRoles():this.ref.detectChanges()})}getRoles(){this._administration.rolesListing({search:this.search}).subscribe(t=>{this.roles=t.data,console.log("roles",this.roles)})}roleAction(t,i,o){const a=this._modal.open(M,this.modalConfig);a.componentInstance.role=Object.assign({},t),a.componentInstance.type=i,a.componentInstance.response.subscribe(p=>{p.success&&this.getRoles(),a.close()})}addRole(){const t=this._modal.open(M,this.modalConfig);t.componentInstance.role={},t.componentInstance.type="add",t.componentInstance.response.subscribe(i=>{i.success&&this.getRoles(),t.close()})}searchRole(){(this.search.length>=3||0==this.search.length)&&this.getRoles()}ngOnDestroy(){this.notificationSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(g.E),e.Y36(b.FF),e.Y36(A.e),e.Y36(f.B))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-roles"]],decls:26,vars:4,consts:[[1,"dashboard-main"],[1,"dashboard-content"],[1,"d-flex","align-items-center","mb-16","justify-content-between","mr-70"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","javascript:void(0)",1,"breadcrumb-link"],["class","secondary-sup","href","javascript:void(0)",3,"click",4,"ngIf"],[1,"roles-main"],[1,"form-group","sear-bar-roles","position-relative","mb-0"],["type","search","placeholder","Search..","id","email",1,"form-control","form-control-roles",3,"ngModel","input","ngModelChange"],["name","search",1,"search-ctm"],[1,"tables-roles-main","table-responsive"],[1,"table"],[1,"thead-ctm"],[4,"ngIf"],[1,"t-body-ctm"],[4,"ngFor","ngForOf"],["href","javascript:void(0)",1,"secondary-sup",3,"click"],["name","plus",1,"plus"],[1,"select-box"],[1,"input-style","form-group"],["name","edit-3",1,"mr-2",3,"click"],["name","trash",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4)(5,"a",5),e._uU(6,"ADMINISTRATION"),e.qZA()(),e.TgZ(7,"li",4)(8,"a",5),e._uU(9,"ROLES"),e.qZA()()(),e.YNc(10,S,3,0,"a",6),e.qZA(),e.TgZ(11,"div",7)(12,"div",8)(13,"input",9),e.NdJ("input",function(){return i.searchRole()})("ngModelChange",function(a){return i.search=a}),e.qZA(),e._UZ(14,"i-feather",10),e.qZA(),e.TgZ(15,"div",11)(16,"table",12)(17,"thead",13)(18,"tr")(19,"th"),e._uU(20,"#"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Role name"),e.qZA(),e.YNc(23,P,2,0,"th",14),e.qZA()(),e.TgZ(24,"tbody",15),e.YNc(25,w,6,3,"tr",16),e.qZA()()()()()()),2&t&&(e.xp6(10),e.Q6J("ngIf",i._auth.checkPermissions("administration","write")),e.xp6(3),e.Q6J("ngModel",i.search),e.xp6(10),e.Q6J("ngIf",i._auth.checkPermissions("administration","write")),e.xp6(2),e.Q6J("ngForOf",i.roles))},directives:[s.O5,x.u,l.Fj,l.JJ,l.On,s.sg],styles:[""]}),n})();function O(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"span",29),e._uU(1),e.TgZ(2,"span")(3,"i-feather",30),e.NdJ("click",function(){const a=e.CHM(t).index;return e.oxw(2).removeRecipient(a)}),e.qZA()()()}if(2&n){const t=r.$implicit;e.xp6(1),e.hij(" ",t," ")}}function F(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",31)(1,"div",32)(2,"a",33),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).update()}),e._uU(3," Update "),e.qZA()()()}}function Q(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",11)(2,"div",12)(3,"h4",13),e._uU(4,"Blacklist Email"),e.qZA()(),e.TgZ(5,"div",14)(6,"div",15)(7,"label",16)(8,"input",17),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().settings.blacklist_email_enabled=o}),e.qZA(),e._UZ(9,"span",18),e.qZA()()()(),e.TgZ(10,"div",11)(11,"div",12)(12,"h4",19),e._uU(13,"Email Recipients "),e.TgZ(14,"span",20),e._uU(15,"(press enter to add)"),e.qZA()()(),e.TgZ(16,"div",21)(17,"div",22)(18,"label",23),e._uU(19,"An email will be send to "),e.TgZ(20,"span",24),e._uU(21,"scott@humphreystretton.com"),e.qZA(),e._uU(22,". Below you can add CC for blacklist orders"),e.qZA(),e.TgZ(23,"input",25),e.NdJ("keyup",function(o){return e.CHM(t),e.oxw().addRecipient(o)}),e.qZA(),e.TgZ(24,"div",26),e.YNc(25,O,4,1,"span",27),e.qZA()()()(),e.YNc(26,F,4,0,"div",28),e.qZA()}if(2&n){const t=e.oxw();e.xp6(8),e.Q6J("ngModel",t.settings.blacklist_email_enabled),e.xp6(17),e.Q6J("ngForOf",t.settings.blacklist_email_recipients),e.xp6(1),e.Q6J("ngIf",t._auth.checkPermissions("administration","write"))}}function L(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",31)(1,"div",32)(2,"a",33),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).updateSageListing()}),e._uU(3," Update "),e.qZA()()()}}function Y(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",11)(2,"div",34)(3,"label",35),e._uU(4,"LIVE URL "),e.TgZ(5,"input",36),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().sage.is_live=o}),e.qZA(),e._UZ(6,"span",18),e.qZA()(),e.TgZ(7,"div",34)(8,"label",35),e._uU(9,"STAGING URL "),e.TgZ(10,"input",36),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().sage.is_live=o}),e.qZA(),e._UZ(11,"span",18),e.qZA()()(),e.TgZ(12,"div",11)(13,"div",21)(14,"div",22)(15,"label",23),e._uU(16,"Live URL"),e.qZA(),e.TgZ(17,"input",37),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().sage.live_url=o}),e.qZA()()(),e.TgZ(18,"div",21)(19,"div",22)(20,"label",23),e._uU(21,"Staging URL"),e.qZA(),e.TgZ(22,"input",38),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().sage.staging_url=o}),e.qZA()()(),e.TgZ(23,"div",21)(24,"div",22)(25,"label",23),e._uU(26,"Live Token"),e.qZA(),e.TgZ(27,"input",39),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().sage.live_token=o}),e.qZA()()(),e.TgZ(28,"div",21)(29,"div",22)(30,"label",23),e._uU(31,"Staging Token"),e.qZA(),e.TgZ(32,"input",40),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().sage.staging_token=o}),e.qZA()()()(),e.YNc(33,L,4,0,"div",28),e.qZA()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("value",1)("ngModel",t.sage.is_live),e.xp6(5),e.Q6J("value",0)("ngModel",t.sage.is_live),e.xp6(7),e.Q6J("ngModel",t.sage.live_url),e.xp6(5),e.Q6J("ngModel",t.sage.staging_url),e.xp6(5),e.Q6J("ngModel",t.sage.live_token),e.xp6(5),e.Q6J("ngModel",t.sage.staging_token),e.xp6(1),e.Q6J("ngIf",t._auth.checkPermissions("administration","write"))}}let j=(()=>{class n{constructor(t,i,o){this._administration=t,this._auth=i,this.helper=o}ngOnInit(){this.getSageListing(),this.getAdminSettings()}getAdminSettings(){this._administration.getSettings().subscribe(t=>{this.settings=t.data})}getSageListing(){this._administration.getSageListing().subscribe(t=>{this.sage=t.data})}update(){this._administration.updateSettings(this.settings).subscribe(t=>{this.helper.toastSuccess(t.message),this.settings=t.data})}updateSageListing(){this.validateSageUpdate()&&this._administration.updateSageListing(this.sage).subscribe(t=>{this.helper.toastSuccess(t.message),this.sage=t.data})}validateSageUpdate(){return this.sage.staging_url?this.sage.staging_token?this.sage.live_url?!!this.sage.live_token||(this.helper.toastError("Please Enter Live Token."),!1):(this.helper.toastError("Please Enter Live URL."),!1):(this.helper.toastError("Please Enter Staging Token."),!1):(this.helper.toastError("Please Enter Staging URL."),!1)}addRecipient(t){console.log(t.keyCode),13==t.keyCode&&(this.settings.blacklist_email_recipients.push(t.target.value),t.target.value="")}removeRecipient(t){this.settings.blacklist_email_recipients.splice(t,1)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.E),e.Y36(A.e),e.Y36(f.B))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-settings"]],decls:14,vars:2,consts:[[1,"dashboard-main"],[1,"dashboard-content"],[1,"d-flex","align-items-center","mb-16","justify-content-between","mr-70"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","javascript:void(0)",1,"breadcrumb-link"],["href","javascript:void(0)",1,"breadcrumb-link","active"],[1,"tables-roles-main"],["class","roles-main p-3",4,"ngIf"],[1,"tables-roles-main","staging-card"],[1,"roles-main","p-3"],[1,"row","mb-3"],[1,"col-sm-3"],["for","blacklist_enabled"],[1,"col-sm-9"],[1,"remember-me"],[1,"custom-check","custom-check-r"],["type","checkbox","checked","checked",3,"ngModel","ngModelChange"],[1,"checkmark"],[1,"mt-2"],[1,"small"],[1,"col-sm-6"],[1,"input-style","mb-2"],[1,"my-0",2,"font-size","1rem","font-weight","normal","margin-left","5px"],[1,"text-red",2,"font-size","1rem","font-weight","normal"],["type","email","placeholder","email address",1,"ctm-input","type-input",3,"keyup"],[1,"d-flex","flex-wrap"],["class","fiels-ctm","style","font-size:12px;",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"fiels-ctm",2,"font-size","12px"],["name","plus",1,"plus-rotate",3,"click"],[1,"row"],[1,"col","justify-content-end","d-flex","align-items-center"],["href","javascript:void(0)",1,"secondary-sup",3,"click"],[1,"remember-me","remember-me-radio","col-md-6"],[1,"custom-radio","setting-radio"],["type","radio","name","radio",3,"value","ngModel","ngModelChange"],["type","email","placeholder","Live URL",1,"ctm-input","type-input",3,"ngModel","ngModelChange"],["type","email","placeholder","Staging URL",1,"ctm-input","type-input",3,"ngModel","ngModelChange"],["type","email","placeholder","Live Token",1,"ctm-input","type-input",3,"ngModel","ngModelChange"],["type","email","placeholder","Staging Token",1,"ctm-input","type-input",3,"ngModel","ngModelChange"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4)(5,"a",5),e._uU(6,"ADMINISTRATION"),e.qZA()(),e.TgZ(7,"li",4)(8,"a",6),e._uU(9,"SETTINGS"),e.qZA()()()(),e.TgZ(10,"div",7),e.YNc(11,Q,27,3,"div",8),e.qZA(),e.TgZ(12,"div",9),e.YNc(13,Y,34,9,"div",8),e.qZA()()()),2&t&&(e.xp6(11),e.Q6J("ngIf",i.settings),e.xp6(2),e.Q6J("ngIf",i.sage))},directives:[s.O5,l.Wl,l.JJ,l.On,s.sg,x.u,l._,l.Fj],styles:[".staging-card[_ngcontent-%COMP%]{margin-top:20px}"]}),n})();function D(n,r){1&n&&(e.TgZ(0,"h4",8),e._uU(1,"ADD USER"),e.qZA())}function z(n,r){1&n&&(e.TgZ(0,"h4",8),e._uU(1,"EDIT USER"),e.qZA())}function H(n,r){1&n&&(e.TgZ(0,"h4",8),e._uU(1,"DELETE USER"),e.qZA())}function $(n,r){1&n&&(e.TgZ(0,"div",10)(1,"label",11),e._uU(2,"Password"),e.TgZ(3,"span",12),e._uU(4,"*"),e.qZA()(),e.TgZ(5,"div",22)(6,"h5"),e._uU(7,"A system generated password will be sent to this user which user can change later."),e.qZA()()())}function B(n,r){if(1&n&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&n){const t=r.$implicit,i=e.oxw(2);e.Q6J("value",t.id)("selected",i.user.role_id==t.id),e.xp6(1),e.Oqu(t.title)}}function K(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"label",11),e._uU(3,"Name"),e.TgZ(4,"span",12),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"input",13),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().user.name=o}),e.qZA()(),e.TgZ(7,"div",10)(8,"label",11),e._uU(9,"Email"),e.TgZ(10,"span",12),e._uU(11,"*"),e.qZA()(),e.TgZ(12,"input",14),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().user.email=o}),e.qZA()(),e.YNc(13,$,8,0,"div",15),e.TgZ(14,"div",16)(15,"div",17)(16,"label",11),e._uU(17,"Role"),e.TgZ(18,"span",12),e._uU(19,"*"),e.qZA()(),e.TgZ(20,"div",18)(21,"select",19),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().user.role_id=o}),e.TgZ(22,"option",20),e._uU(23,"Select Role"),e.qZA(),e.YNc(24,B,2,3,"option",21),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.user.name),e.xp6(6),e.Q6J("ngModel",t.user.email),e.xp6(1),e.Q6J("ngIf","add"==t.type),e.xp6(8),e.Q6J("ngModel",t.user.role_id)("disabled",t.user.id==t.currentUser.id),e.xp6(3),e.Q6J("ngForOf",t.roles)}}function W(n,r){1&n&&(e.TgZ(0,"div",9)(1,"h3",24),e._uU(2,"Are you sure you want to delete this user?"),e.qZA()())}function V(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"a",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().add()}),e._uU(1,"Add"),e.qZA()}}function X(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"a",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().update()}),e._uU(1,"Update"),e.qZA()}}function G(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"a",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().deleteUser()}),e._uU(1,"Confirm"),e.qZA()}}let E=(()=>{class n{constructor(t,i,o){this.helper=t,this._administration=i,this._auth=o,this.response=new e.vpe,this.currentUser=this._auth.currentUserValue}ngOnInit(){console.log(this.user,this.type,this.roles)}cancel(){this.response.emit({success:!1})}add(){this.validateForm()&&this._administration.addUser(this.user).subscribe(t=>{this.helper.toastSuccess(t.message),this.response.emit(t)})}deleteUser(){this._administration.deleteUser({id:this.user.id}).subscribe(t=>{this.helper.toastSuccess(t.message),this.response.emit({success:!0,delete:!0})})}update(){this.validateForm()&&this._administration.updateUser(this.user).subscribe(t=>{this.helper.toastSuccess(t.message),this.response.emit(t)})}validateForm(){var t,i;return(null===(t=this.user.name)||void 0===t?void 0:t.length)?this.user.name.length<3?(this.helper.toastError("Name must be of atleast 3 characters"),!1):(null===(i=this.user.email)||void 0===i?void 0:i.length)?this.helper.validateEmailAddress(this.user.email)?0!=this.user.role_id||(this.helper.toastError("Role is required"),!1):(this.helper.toastError("Please enter a valid email address"),!1):(this.helper.toastError("Email is required"),!1):(this.helper.toastError("Name is required"),!1)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.B),e.Y36(g.E),e.Y36(A.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-edit-user"]],inputs:{user:"user",type:"type",roles:"roles"},outputs:{response:"response"},decls:15,vars:8,consts:[[1,"modal-header"],["class","modal-title",4,"ngIf"],["type","button","data-dismiss","modal",1,"close"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"d-flex","align-items-center","justify-content-center","w-100"],["href","javascript:void(0)",1,"discard-btn",3,"click"],["href","javascript:void(0)","class","add-btn",3,"click",4,"ngIf"],[1,"modal-title"],[1,"modal-body"],[1,"input-style","mb-2"],[1,"d-block"],[1,"text-danger"],["type","text","placeholder","Muhammad","name","name",1,"ctm-input",3,"ngModel","ngModelChange"],["type","email","placeholder","abc@mail.com","name","email",1,"ctm-input",3,"ngModel","ngModelChange"],["class","input-style mb-2",4,"ngIf"],[1,"select-box"],[1,"input-style","form-group"],[1,"arrow-design"],["placeholder","Change Action",1,"form-control",3,"ngModel","disabled","ngModelChange"],["value","0","selected",""],[3,"value","selected",4,"ngFor","ngForOf"],[1,"type-pass"],[3,"value","selected"],[1,"text-center"],["href","javascript:void(0)",1,"add-btn",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,D,2,0,"h4",1),e.YNc(2,z,2,0,"h4",1),e.YNc(3,H,2,0,"h4",1),e.TgZ(4,"button",2),e._uU(5,"\xd7"),e.qZA()(),e.YNc(6,K,25,6,"div",3),e.YNc(7,W,3,0,"div",3),e.TgZ(8,"div",4)(9,"div",5)(10,"a",6),e.NdJ("click",function(){return i.cancel()}),e._uU(11,"Cancel"),e.qZA(),e.YNc(12,V,2,0,"a",7),e.YNc(13,X,2,0,"a",7),e.YNc(14,G,2,0,"a",7),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngIf","add"==i.type),e.xp6(1),e.Q6J("ngIf","edit"==i.type),e.xp6(1),e.Q6J("ngIf","delete"==i.type),e.xp6(3),e.Q6J("ngIf","delete"!=i.type),e.xp6(1),e.Q6J("ngIf","delete"==i.type),e.xp6(5),e.Q6J("ngIf","add"==i.type),e.xp6(1),e.Q6J("ngIf","edit"==i.type),e.xp6(1),e.Q6J("ngIf","delete"==i.type))},directives:[s.O5,l.Fj,l.JJ,l.On,l.EJ,l.YN,l.Kr,s.sg],styles:["select.form-control[_ngcontent-%COMP%]{width:100%;padding:2px 5.5rem 2px 2rem;height:5.5rem}.select-box[_ngcontent-%COMP%]   .arrow-design[_ngcontent-%COMP%]{width:100%;height:auto!important}"]}),n})();var ee=c(8601);function te(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"a",19),e.NdJ("click",function(){return e.CHM(t),e.oxw().addUser()}),e._UZ(1,"i-feather",20),e._uU(2," New User "),e.qZA()}}function ne(n,r){1&n&&(e.TgZ(0,"th")(1,"p",15),e._uU(2,"Action"),e.qZA()())}function ie(n,r){if(1&n&&(e.TgZ(0,"option",32),e._uU(1),e.qZA()),2&n){const t=r.$implicit,i=e.oxw().$implicit;e.Q6J("value",t.id)("selected",i.role_id==t.id),e.xp6(1),e.Oqu(t.title)}}function se(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"td")(1,"div",23)(2,"div",24)(3,"i-feather",33),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),a=o.$implicit,p=o.index;return e.oxw(2).userAction(a,"edit",p)}),e.qZA(),e.TgZ(4,"i-feather",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),a=o.$implicit,p=o.index;return e.oxw(2).userAction(a,"delete",p)}),e.qZA()()()()}}const oe=function(n){return{disabled:n}};function ae(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"div",23)(9,"div",24)(10,"div",25)(11,"select",26),e.NdJ("change",function(o){const a=e.CHM(t),p=a.$implicit,T=a.index;return e.oxw(2).updateRole(p,o,T)}),e.YNc(12,ie,2,3,"option",27),e.qZA()()()()(),e.TgZ(13,"td")(14,"div",28)(15,"label",29)(16,"input",30),e.NdJ("change",function(){const a=e.CHM(t).$implicit;return e.oxw(2).updateUserStatus(a)}),e.qZA(),e._UZ(17,"span",31),e.qZA()()(),e.YNc(18,se,5,0,"td",16),e.qZA()}if(2&n){const t=r.$implicit,i=e.oxw(2);e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.email),e.xp6(5),e.Q6J("disabled",!i._auth.checkPermissions("administration","write")||i.currentUser.id==t.id),e.xp6(1),e.Q6J("ngForOf",i.roles),e.xp6(3),e.Q6J("ngClass",e.VKq(9,oe,t.id!=i.currentUser.id||2==t.status)),e.xp6(1),e.Q6J("checked",1==t.status)("disabled",!i._auth.checkPermissions("administration","write")||2==t.status),e.xp6(2),e.Q6J("ngIf",i._auth.checkPermissions("administration","write"))}}function re(n,r){if(1&n&&(e.TgZ(0,"tbody",21),e.YNc(1,ae,19,11,"tr",22),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.users)}}const le=[{path:"",redirectTo:"users"},{path:"roles",component:I},{path:"users",component:(()=>{class n{constructor(t,i,o,a,p){this.ref=t,this._administration=i,this.helper=o,this._modal=a,this._auth=p,this.users=[],this.roles=[],this.searchParams={search:"",page_size:10,page:1},this.pageFrom=1,this.pageTo=10,this.totalCount=10,this.isLoading=!0,this.modalConfig={animated:!0,keyboard:!1,backdrop:!1,ignoreBackdropClick:!0,windowClass:"modal-roles"},this.currentUser=null,this.currentUser=this._auth.currentUserValue,console.log("user constructor called")}ngOnInit(){this.getAllUsers(),this.getRoles(),this.getNotifications()}getNotifications(){this.notificationSubscription=this.helper.currentNotification.subscribe(t=>{console.log("users notification called"),1==this.helper.checkNotification("users","administration",this.users,t)?this.getAllUsers():this.ref.detectChanges()})}getAllUsers(){this._administration.usersListing(this.searchParams).subscribe(t=>{this.users=t.data.data,this.searchParams.page_size=t.data.per_page,this.searchParams.page=t.data.current_page,this.totalPages=t.data.last_page,this.pageFrom=t.data.from,this.pageTo=t.data.to,this.totalCount=t.data.total})}getRoles(){this._administration.rolesListing().subscribe(t=>{this.roles=t.data,this.isLoading=!1})}updateRole(t,i,o){console.log(t,i.target.value),this._administration.updateUser({role_id:i.target.value,id:t.id,name:t.name}).subscribe(p=>{this.users[o]=p.data,this.helper.toastSuccess(p.message)})}userAction(t,i,o){const a=this._modal.open(E,this.modalConfig);a.componentInstance.user=Object.assign({},t),a.componentInstance.type=i,a.componentInstance.roles=this.roles,a.componentInstance.response.subscribe(p=>{p.success&&(p.delete?this.users.splice(o,1):this.users[o]=p.data),a.close()})}updateUserStatus(t){t.status=!t.status,this._administration.updateUser(t).subscribe(i=>{t.status=i.data.status})}addUser(){const t=this._modal.open(E,this.modalConfig);t.componentInstance.user={},t.componentInstance.type="add",t.componentInstance.roles=this.roles,t.componentInstance.response.subscribe(i=>{i.success&&this.getAllUsers(),t.close()})}searchUser(){this.getAllUsers()}changePage(t){this.searchParams.page=t,this.getAllUsers()}ChangePageSize(t){this.searchParams.page=1,this.searchParams.page_size=t,this.getAllUsers()}ngOnDestroy(){console.log("destroy called users"),this.notificationSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(g.E),e.Y36(f.B),e.Y36(b.FF),e.Y36(A.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-users"]],decls:37,vars:9,consts:[[1,"dashboard-main"],[1,"dashboard-content"],[1,"d-flex","align-items-center","mb-16","justify-content-between","mr-70"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","javascript:void(0)",1,"breadcrumb-link"],["href","javascript:void(0)",1,"breadcrumb-link","active"],["class","secondary-sup","href","javascript:void(0)",3,"click",4,"ngIf"],[1,"roles-main"],[1,"form-group","sear-bar-roles","position-relative","mb-0"],["type","search","placeholder","Search..","id","email",1,"form-control","form-control-roles",3,"ngModel","input","ngModelChange"],["name","search",1,"search-ctm"],[1,"tables-roles-main","tables-users-main","table-responsive"],[1,"table","table-fixed"],[1,"thead-ctm"],[1,"inner-cell"],[4,"ngIf"],["class","t-body-ctm",4,"ngIf"],[3,"from","to","pageSize","totalPages","total","changePage","ChangePageSize"],["href","javascript:void(0)",1,"secondary-sup",3,"click"],["name","plus",1,"plus"],[1,"t-body-ctm"],[4,"ngFor","ngForOf"],[1,"select-box","d-flex","justify-content-center"],[1,"input-style","form-group"],[1,"arrow-design"],[1,"form-control",3,"disabled","change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"inner-cell","custom-box","d-flex","justify-content-center"],[1,"switch",3,"ngClass"],["type","checkbox",3,"checked","disabled","change"],[1,"slider","round"],[3,"value","selected"],["name","edit-3",1,"mr-2",3,"click"],["name","trash",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4)(5,"a",5),e._uU(6,"ADMINISTRATION"),e.qZA()(),e.TgZ(7,"li",4)(8,"a",6),e._uU(9,"USERS LISTS"),e.qZA()()(),e.YNc(10,te,3,0,"a",7),e.qZA(),e.TgZ(11,"div",8)(12,"div",9)(13,"input",10),e.NdJ("input",function(){return i.searchUser()})("ngModelChange",function(a){return i.searchParams.search=a}),e.qZA(),e._UZ(14,"i-feather",11),e.qZA(),e.TgZ(15,"div",12)(16,"table",13)(17,"thead",14)(18,"tr")(19,"th")(20,"p",15),e._uU(21,"#"),e.qZA()(),e.TgZ(22,"th")(23,"p",15),e._uU(24,"Name"),e.qZA()(),e.TgZ(25,"th")(26,"p",15),e._uU(27,"Email"),e.qZA()(),e.TgZ(28,"th")(29,"p",15),e._uU(30,"Role"),e.qZA()(),e.TgZ(31,"th")(32,"p",15),e._uU(33,"Status"),e.qZA()(),e.YNc(34,ne,3,0,"th",16),e.qZA()(),e.YNc(35,re,2,1,"tbody",17),e.qZA()(),e.TgZ(36,"app-pagination",18),e.NdJ("changePage",function(a){return i.changePage(a)})("ChangePageSize",function(a){return i.ChangePageSize(a)}),e.qZA()()()()),2&t&&(e.xp6(10),e.Q6J("ngIf",i._auth.checkPermissions("administration","write")),e.xp6(3),e.Q6J("ngModel",i.searchParams.search),e.xp6(21),e.Q6J("ngIf",i._auth.checkPermissions("administration","write")),e.xp6(1),e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("from",i.pageFrom)("to",i.pageTo)("pageSize",i.searchParams.page_size)("totalPages",i.totalPages)("total",i.totalCount))},directives:[s.O5,x.u,l.Fj,l.JJ,l.On,s.sg,l.YN,l.Kr,s.mk,ee.Q],styles:[".disabled{cursor:not-allowed;opacity:.8}\n"],encapsulation:2}),n})()},{path:"settings",component:j}];let ce=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[_.Bz.forChild(le)],_.Bz]}),n})();var de=c(5530),pe=c(9618);let _e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[s.ez,l.u5,b.IJ,ce,pe.m,x.p.pick(de.kEt)]]}),n})()},9618:(U,v,c)=>{c.d(v,{m:()=>f});var s=c(9808),_=c(4182),e=c(5e3);let f=(()=>{class g{}return g.\u0275fac=function(u){return new(u||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[[s.ez,_.u5]]}),g})()},1628:(U,v,c)=>{c.d(v,{E:()=>g});var s=c(2340),_=c(4312),e=c(5e3),f=c(520);let g=(()=>{class l{constructor(d){this.http=d}usersListing(d={}){return this.http.post(`${s.N.apiUrl+_.j.getUsersList}`,d)}addUser(d={}){return this.http.post(`${s.N.apiUrl+_.j.addUser}`,d)}deleteUser(d={}){return this.http.post(`${s.N.apiUrl+_.j.deleteUser}`,d)}updateUser(d={}){return this.http.post(`${s.N.apiUrl+_.j.updateUser}`,d)}rolesListing(d={}){return this.http.post(`${s.N.apiUrl+_.j.getRolesList}`,d)}addRole(d={}){return this.http.post(`${s.N.apiUrl+_.j.addRole}`,d)}deleteRole(d={}){return this.http.post(`${s.N.apiUrl+_.j.deleteRole}`,d)}updateRole(d={}){return this.http.post(`${s.N.apiUrl+_.j.updateRole}`,d)}getPermissionsList(){return this.http.get(`${s.N.apiUrl+_.j.getPermissionsList}`)}getSettings(){return this.http.get(`${s.N.apiUrl+_.j.getAdminSettings}`)}getSageListing(){return this.http.post(`${s.N.apiUrl+_.j.getSageListing}`,{})}updateSettings(d={}){return this.http.post(`${s.N.apiUrl+_.j.updateAdminSettings}`,d)}updateSageListing(d={}){return this.http.post(`${s.N.apiUrl+_.j.updateSageListing}`,d)}}return l.\u0275fac=function(d){return new(d||l)(e.LFG(f.eN))},l.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()}}]);